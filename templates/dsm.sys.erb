**********************************************************
* Tivoli Storage Manager Client Configuration for        *
* Portal Partnership Ltd.                                *
**********************************************************
* Puppet Managed Configuration File                      *
* Do not edit this file manually as changes will be      *
* overwritten by the puppetmaster                        *
**********************************************************
* Purpose: Main TSM Client Configuration (dsm.sys)       *
**********************************************************

Servername        <%= servername %>
COMMMethod        TCPip
TCPPort           <%= scope['tsmclient::serverport'] %>
TCPServeraddress  <%= scope['tsmclient::serveraddress'] %>
TCPClientport     <%= scope['tsmclient::clientport'] %>
nodename          <%= scope['tsmclient::nodename'] %>
managedservices   schedule
passwordaccess    generate

*  Log file settings
errorlogname /var/log/tsm/dsmerror.log
errorlogretention 14 D

schedlogname /var/log/tsm/dsmsched.log
schedlogretention 14 D

<% scope['tsmclient::excludes'].each_pair do |key, value| %>
  <% unless key == "list" %>
    <% value.each do |entry| %>
exclude.<%= key %> "<%= entry %>"
    <% end %>
  <% else %>
    <% value.each do |entry| %>
exclude "<%= entry %>"
    <% end %>
  <% end %>
<% end %>

<% scope['tsmclient::includes'].each_pair do |key, value| %>
  <% unless key == "list" %>
    <% value.each do |entry| %>
exclude.<%= key %> "<%= entry %>"
    <% end %>
  <% else %>
    <% value.each do |entry| %>
exclude "<%= entry %>"
    <% end %>
  <% end %>
<% end %>
